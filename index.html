<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALBINA KHABIYEVA | Blooming Ink</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & Libraries -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Three.js (Core Only) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Lenis (Smooth Scroll) -->
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Italiana&family=Manrope:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        body { 
            background-color: #ffffff; 
            color: #000000;
            margin: 0;
            font-family: 'Manrope', sans-serif;
            overflow-x: hidden;
            cursor: none; /* Custom cursor active */
        }
        .font-serif-display { font-family: 'Italiana', serif; }
        
        /* Smooth Scroll Setup */
        html.lenis { height: auto; }
        .lenis.lenis-smooth { scroll-behavior: auto; }
        .lenis.lenis-stopped { overflow: hidden; }
        
        ::selection { background: #000; color: #fff; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { motion, useScroll, useTransform, AnimatePresence } = window.Motion;

        // --- 0. SMOOTH SCROLL ---
        const SmoothScroll = ({ children }) => {
            useEffect(() => {
                const lenis = new Lenis({
                    duration: 1.2,
                    easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
                    smooth: true,
                });
                function raf(time) {
                    lenis.raf(time);
                    requestAnimationFrame(raf);
                }
                requestAnimationFrame(raf);
                return () => lenis.destroy();
            }, []);
            return <>{children}</>;
        };

        // --- 1. PERFORMANCE CURSOR ---
        const Cursor = () => {
            const cursorRef = useRef(null);
            
            useEffect(() => {
                const cursor = cursorRef.current;
                
                const move = (e) => {
                    if(cursor) {
                        cursor.style.transform = `translate3d(${e.clientX}px, ${e.clientY}px, 0) translate(-50%, -50%)`;
                    }
                };

                window.addEventListener("mousemove", move);
                
                const handleHover = (e) => {
                    if (e.target.closest('a, button, input, textarea, .hover-target')) {
                        cursor.classList.add('scale-[3]');
                        cursor.classList.add('mix-blend-difference');
                        cursor.classList.add('bg-white');
                        cursor.classList.remove('bg-black');
                    } else {
                        cursor.classList.remove('scale-[3]');
                        cursor.classList.remove('mix-blend-difference');
                        cursor.classList.remove('bg-white');
                        cursor.classList.add('bg-black');
                    }
                };
                window.addEventListener('mouseover', handleHover);

                return () => {
                    window.removeEventListener("mousemove", move);
                    window.removeEventListener('mouseover', handleHover);
                };
            }, []);

            return (
                <div 
                    ref={cursorRef}
                    className="fixed top-0 left-0 w-3 h-3 bg-black rounded-full pointer-events-none z-[9999] transition-transform duration-75 ease-out will-change-transform"
                    style={{ position: 'fixed', left: 0, top: 0 }}
                />
            );
        };

        // --- 2. THREE.JS GIANT BLOOMING FLOWER ---
        const RealisticBloomingFlower = () => {
            const mountRef = useRef(null);

            useEffect(() => {
                const scene = new THREE.Scene();
                
                // Camera setup for a bigger, closer view
                const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
                camera.position.set(0, 3, 5); // Closer and higher angle
                camera.lookAt(0, 0, 0);

                const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                mountRef.current.appendChild(renderer.domElement);

                // --- Lighting (Dramatic Studio Light) ---
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
                scene.add(ambientLight);

                const spotLight = new THREE.SpotLight(0xffffff, 1.5);
                spotLight.position.set(5, 10, 5);
                spotLight.angle = 0.5;
                spotLight.penumbra = 0.5;
                scene.add(spotLight);
                
                const rimLight = new THREE.PointLight(0xffffff, 1);
                rimLight.position.set(-5, 2, -5);
                scene.add(rimLight);

                // --- Flower Logic ---
                const flowerGroup = new THREE.Group();
                scene.add(flowerGroup);

                // Petal Geometry (Curved and Detailed)
                // We bend a plane to make it look like a petal
                const createPetalGeometry = (width, length) => {
                    const shape = new THREE.Shape();
                    // Organic petal shape
                    shape.moveTo(0, 0);
                    shape.bezierCurveTo(width * 0.5, length * 0.2, width, length * 0.5, 0, length);
                    shape.bezierCurveTo(-width, length * 0.5, -width * 0.5, length * 0.2, 0, 0);

                    const extrudeSettings = {
                        steps: 5, // More steps for smoothness
                        depth: 0.05,
                        bevelEnabled: true,
                        bevelThickness: 0.02,
                        bevelSize: 0.02,
                        bevelSegments: 5
                    };

                    const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
                    
                    // Bend the geometry (Simple vertex displacement for curve)
                    const positions = geometry.attributes.position;
                    const vector = new THREE.Vector3();
                    for (let i = 0; i < positions.count; i++) {
                        vector.fromBufferAttribute(positions, i);
                        // Bend along Z axis based on Y height (length)
                        const bendFactor = 0.5; 
                        const zOffset = Math.pow(vector.y / length, 2) * bendFactor;
                        vector.z += zOffset;
                        positions.setXYZ(i, vector.x, vector.y, vector.z);
                    }
                    geometry.computeVertexNormals();
                    
                    return geometry;
                };

                // Material: Metallic/Pearl White
                const petalMaterial = new THREE.MeshPhysicalMaterial({
                    color: 0xf5f5f5,
                    metalness: 0.3,
                    roughness: 0.2,
                    clearcoat: 1.0,
                    clearcoatRoughness: 0.1,
                    side: THREE.DoubleSide
                });

                // Layers of petals
                const layers = [
                    { count: 6, width: 0.6, length: 1.5, angleOffset: 0, yPos: 0.2, rotOffset: 0.2 }, // Inner
                    { count: 9, width: 0.8, length: 2.0, angleOffset: 0.2, yPos: 0.1, rotOffset: 0.5 }, // Middle
                    { count: 12, width: 1.0, length: 2.5, angleOffset: 0.4, yPos: 0.0, rotOffset: 0.8 }, // Outer
                ];

                const petalAnimations = []; // Store references for animation

                layers.forEach((layer, layerIndex) => {
                    const geo = createPetalGeometry(layer.width, layer.length);
                    
                    for(let i=0; i<layer.count; i++) {
                        const pivot = new THREE.Group();
                        const mesh = new THREE.Mesh(geo, petalMaterial);
                        
                        // Initial setup
                        pivot.add(mesh);
                        pivot.position.y = layer.yPos;
                        pivot.rotation.y = (i / layer.count) * Math.PI * 2 + layer.angleOffset;
                        
                        // Initial bloom state (Closed)
                        // mesh.rotation.x = -1.5; // Tightly closed
                        
                        flowerGroup.add(pivot);
                        
                        petalAnimations.push({
                            mesh: mesh,
                            baseRot: -1.2 + (layerIndex * 0.3), // Inner layers are more closed initially
                            bloomRange: 1.5, // How much it opens
                            speedOffset: i * 0.1 + layerIndex * 0.5 // Organic delay
                        });
                    }
                });

                // Pistil (Center)
                const pistilGeo = new THREE.SphereGeometry(0.4, 32, 32);
                const pistilMat = new THREE.MeshPhysicalMaterial({ color: 0x333333, roughness: 0.8, metalness: 0.5 });
                const pistil = new THREE.Mesh(pistilGeo, pistilMat);
                pistil.position.y = 0.5;
                pistil.scale.y = 0.6;
                flowerGroup.add(pistil);

                // Initial Position
                flowerGroup.rotation.x = 0.5; // Tilt towards camera
                flowerGroup.position.y = -1; // Move down so it fills the screen nicely

                // --- Animation ---
                let time = 0;
                const animate = () => {
                    requestAnimationFrame(animate);
                    time += 0.003; // Slow, graceful speed

                    // Rotate entire flower slowly
                    flowerGroup.rotation.y = time * 0.1;

                    // Blooming Logic
                    // Use Sine wave for breathing effect (Open <-> Close)
                    const breath = (Math.sin(time) + 1) / 2; // 0 to 1
                    
                    petalAnimations.forEach(p => {
                        // Interpolate rotation
                        // Closed state + (Range * Breath * OrganicFactor)
                        const currentRot = p.baseRot + (p.bloomRange * breath);
                        
                        // Apply smoothing or delay based on petal index
                        // We use a slightly offset time for each petal to make it wave
                        const organicBreath = (Math.sin(time + p.speedOffset) + 1) / 2;
                        
                        // Actually, let's make it simply open gracefully
                        // Open: Positive rotation X (outwards)
                        // Closed: Negative rotation X (inwards)
                        p.mesh.rotation.x = p.baseRot + (organicBreath * 1.2); 
                    });

                    renderer.render(scene, camera);
                };
                animate();

                // Handle Resize
                const handleResize = () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                };
                window.addEventListener('resize', handleResize);

                return () => {
                    window.removeEventListener('resize', handleResize);
                    if (mountRef.current) mountRef.current.removeChild(renderer.domElement);
                };
            }, []);

            return <div ref={mountRef} className="fixed inset-0 z-0 pointer-events-none opacity-100" />;
        };

        // --- 3. HERO (Updated Layout) ---
        const Hero = ({ t }) => {
            return (
                <section className="h-screen relative flex flex-col items-center justify-center overflow-hidden pointer-events-none">
                    <div className="absolute inset-0 z-10 flex flex-col justify-between py-12 px-6">
                        {/* Top: Name split */}
                        <div className="flex justify-between items-start mix-blend-difference text-black pointer-events-auto">
                            <motion.h1 
                                initial={{ x: -100, opacity: 0 }} animate={{ x: 0, opacity: 1 }} transition={{ duration: 1.2 }}
                                className="font-serif-display text-[12vw] md:text-[8vw] leading-none tracking-tighter"
                            >
                                ALBINA
                            </motion.h1>
                            <div className="text-right hidden md:block mt-4">
                                <p className="text-xs uppercase tracking-widest">Berlin, Germany</p>
                                <p className="text-xs uppercase tracking-widest text-gray-500">Fine Line Specialist</p>
                            </div>
                        </div>

                        {/* Middle is empty for the 3D Flower */}

                        {/* Bottom: Last Name & CTA */}
                        <div className="flex justify-between items-end mix-blend-difference text-black pointer-events-auto">
                            <div className="hidden md:block">
                                <a href="#booking" className="inline-block border border-black rounded-full px-8 py-3 text-xs uppercase tracking-widest hover:bg-black hover:text-white transition-colors duration-300 hover-target">
                                    {t.bookBtn}
                                </a>
                            </div>
                            <motion.h1 
                                initial={{ x: 100, opacity: 0 }} animate={{ x: 0, opacity: 1 }} transition={{ duration: 1.2, delay: 0.2 }}
                                className="font-serif-display text-[12vw] md:text-[8vw] leading-none tracking-tighter text-right"
                            >
                                KHABIYEVA
                            </motion.h1>
                        </div>
                    </div>
                    
                    {/* Mobile CTA */}
                    <div className="absolute bottom-32 left-1/2 -translate-x-1/2 md:hidden pointer-events-auto">
                         <a href="#booking" className="text-xs uppercase tracking-widest border-b border-black pb-1">Start Project</a>
                    </div>
                </section>
            );
        };

        // --- 4. WATERFALL GALLERY (Asymmetric) ---
        const WaterfallGallery = ({ t }) => {
            const { scrollY } = useScroll();
            const y1 = useTransform(scrollY, [0, 2000], [0, -100]);
            const y2 = useTransform(scrollY, [0, 2000], [0, -300]);

            const works = [
                { id: 1, img: "https://images.unsplash.com/photo-1598371839696-5c5bb00bdc28?w=800", title: "Project Alpha" },
                { id: 2, img: "https://images.unsplash.com/photo-1565568169222-7776b9766444?w=800", title: "Project Beta" },
                { id: 3, img: "https://images.unsplash.com/photo-1611501275019-9b5cda994e8d?w=800", title: "Project Gamma" },
                { id: 4, img: "https://images.unsplash.com/photo-1590246294797-e066227441c2?w=800", title: "Project Delta" },
            ];

            return (
                <section className="py-24 px-6 bg-white relative z-10">
                    <div className="container mx-auto">
                        <div className="flex justify-between items-end mb-24 border-b border-black pb-4">
                            <h2 className="text-4xl font-serif-display">{t.worksTitle}</h2>
                            <span className="text-xs font-bold uppercase tracking-widest">2024 Archive</span>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-32">
                            <motion.div style={{ y: y1 }} className="flex flex-col gap-24 mt-0 md:mt-24">
                                {works.slice(0, 2).map((w, i) => (
                                    <div key={i} className="group cursor-none hover-target">
                                        <div className="aspect-[3/4] overflow-hidden bg-gray-50 mb-4">
                                            <img src={w.img} className="w-full h-full object-cover grayscale group-hover:scale-105 transition-transform duration-700" />
                                        </div>
                                        <div className="flex justify-between text-xs uppercase tracking-widest">
                                            <span>{w.title}</span>
                                            <span>Fine Line</span>
                                        </div>
                                    </div>
                                ))}
                            </motion.div>
                            
                            <motion.div style={{ y: y2 }} className="flex flex-col gap-24">
                                {works.slice(2, 4).map((w, i) => (
                                    <div key={i} className="group cursor-none hover-target">
                                        <div className="aspect-[3/4] overflow-hidden bg-gray-50 mb-4">
                                            <img src={w.img} className="w-full h-full object-cover grayscale group-hover:scale-105 transition-transform duration-700" />
                                        </div>
                                        <div className="flex justify-between text-xs uppercase tracking-widest">
                                            <span>{w.title}</span>
                                            <span>Floral</span>
                                        </div>
                                    </div>
                                ))}
                            </motion.div>
                        </div>
                    </div>
                </section>
            );
        };

        // --- 5. PHILOSOPHY (Big Type) ---
        const Philosophy = ({ t }) => {
            return (
                <section className="py-40 bg-black text-white px-6">
                    <div className="container mx-auto max-w-5xl text-center">
                        <span className="text-6xl font-serif-display block mb-8 opacity-30">“</span>
                        <p className="font-serif-display text-3xl md:text-5xl leading-tight mb-12">
                            {t.philosophyText}
                        </p>
                        <div className="h-[1px] w-24 bg-white/30 mx-auto"></div>
                    </div>
                </section>
            );
        };

        // --- 6. BOOKING (Clean) ---
        const Booking = ({ t, onOpen }) => {
            return (
                <section id="booking" className="py-32 px-6 bg-white flex flex-col items-center justify-center">
                    <h2 className="text-xs font-bold uppercase tracking-[0.5em] mb-12 text-gray-400">Availability Open</h2>
                    
                    <button 
                        onClick={onOpen}
                        className="group relative inline-block cursor-none hover-target"
                    >
                        <span className="font-serif-display text-6xl md:text-9xl text-black group-hover:italic transition-all duration-300">
                            {t.bookBtn}
                        </span>
                        <div className="absolute bottom-0 left-0 w-full h-1 bg-black scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"></div>
                    </button>

                    <div className="mt-24 flex gap-12 text-xs uppercase font-bold tracking-widest text-black">
                        <a href="#" className="hover:underline hover-target">Instagram</a>
                        <a href="#" className="hover:underline hover-target">Email</a>
                    </div>
                </section>
            );
        };

        // --- 7. MODAL ---
        const Modal = ({ isOpen, onClose }) => {
            return (
                <AnimatePresence>
                    {isOpen && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-4">
                            <motion.div 
                                initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
                                onClick={onClose} className="absolute inset-0 bg-white/95 backdrop-blur-xl"
                            />
                            <motion.div 
                                initial={{ y: 50, opacity: 0 }} animate={{ y: 0, opacity: 1 }} exit={{ y: 50, opacity: 0 }}
                                className="w-full max-w-xl relative z-10"
                            >
                                <div className="flex justify-between items-center mb-12 border-b border-black pb-4">
                                    <h3 className="font-serif-display text-4xl">Booking Request</h3>
                                    <button onClick={onClose} className="text-xs font-bold uppercase tracking-widest hover-target">Close</button>
                                </div>
                                <form className="space-y-8">
                                    <input type="text" className="w-full border-b border-gray-200 py-3 text-lg outline-none focus:border-black transition-colors bg-transparent placeholder-gray-400 hover-target" placeholder="Name" />
                                    <input type="email" className="w-full border-b border-gray-200 py-3 text-lg outline-none focus:border-black transition-colors bg-transparent placeholder-gray-400 hover-target" placeholder="Email" />
                                    <textarea rows="3" className="w-full border-b border-gray-200 py-3 text-lg outline-none focus:border-black transition-colors bg-transparent placeholder-gray-400 resize-none hover-target" placeholder="Describe your idea..."></textarea>
                                    <button className="w-full bg-black text-white py-5 text-xs font-bold tracking-[0.3em] uppercase hover:bg-white hover:text-black border border-black transition-colors mt-8 hover-target">
                                        Send Request
                                    </button>
                                </form>
                            </motion.div>
                        </div>
                    )}
                </AnimatePresence>
            );
        };

        // --- DATA ---
        const content = {
            en: {
                worksTitle: "Selected Works",
                philosophyText: "Tattooing is an intimate ritual. I create designs that flow organically with the body, aging gracefully alongside you.",
                bookBtn: "Inquire"
            },
            de: {
                worksTitle: "Ausgewählte Werke",
                philosophyText: "Tätowieren ist ein intimes Ritual. Ich entwerfe Designs, die organisch mit dem Körper fließen und anmutig mit Ihnen altern.",
                bookBtn: "Anfragen"
            }
        };

        const App = () => {
            const [lang, setLang] = useState('en');
            const [modalOpen, setModalOpen] = useState(false);
            const t = content[lang];

            return (
                <SmoothScroll>
                    <div className="antialiased bg-white selection:bg-black selection:text-white">
                        <Cursor />
                        <div className="fixed top-8 left-8 z-50 text-xs font-bold tracking-widest hidden md:block">EST. 2024</div>
                        <div className="fixed top-8 right-8 z-50 flex gap-4 text-xs font-bold tracking-widest cursor-pointer hover-target">
                            <span onClick={() => setLang('en')} className={lang === 'en' ? 'underline' : 'opacity-50'}>EN</span>
                            <span onClick={() => setLang('de')} className={lang === 'de' ? 'underline' : 'opacity-50'}>DE</span>
                        </div>

                        <div className="relative">
                            <RealisticBloomingFlower /> {/* 3D Flower Background */}
                            <Hero t={t} />
                        </div>

                        <main className="relative z-10 bg-white">
                            <WaterfallGallery t={t} />
                            <Philosophy t={t} />
                            <Booking t={t} onOpen={() => setModalOpen(true)} />
                        </main>

                        <Modal isOpen={modalOpen} onClose={() => setModalOpen(false)} />
                    </div>
                </SmoothScroll>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>